{% extends "recepie/base.html" %}
{% block title %}Просмотр файла: {{ fname }}{% endblock %}

{% block content %}
  <a class="btn btn-link px-0" href="javascript:history.back()">← Назад</a>
  <h1 class="h3 mt-2">{{ fname }}</h1>

  {% if raw %}
    <div class="alert alert-warning">Файл не прошёл парсинг — показываю как текст.</div>
    <pre class="p-3 bg-body-tertiary border rounded">{{ raw }}</pre>
  {% else %}
    <div class="card mt-3">
      <div class="card-body">
        <p class="mb-1"><strong>Название:</strong> {{ data.title }}</p>
        <p class="mb-1"><strong>Порций:</strong> {{ data.servings }}</p>

        <h5 class="mt-3">Ингредиенты</h5>
        <div class="table-responsive">
          <table class="table table-sm table-striped">
            <thead>
              <tr><th>Название</th><th>Кол-во</th><th>Ед.</th></tr>
            </thead>
            <tbody>
            {% for ing in data.ingredients %}
              <tr>
                <td>{{ ing.name }}</td>
                <td>{{ ing.amount }}</td>
                <td>{{ ing.unit }}</td>
              </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>

        <h5 class="mt-3">Шаги</h5>
        <ol class="mb-0">
          {% for s in data.steps %}
            <li>{{ s }}</li>
          {% endfor %}
        </ol>
      </div>
    </div>
  {% endif %}
{% endblock %}